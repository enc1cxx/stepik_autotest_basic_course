# PyTest

## Плюсы PyTest:

- PyTest полностью обратно совместим с фреймворками unittest и nosetest. Это означает, что если изначально вы писали тесты, используя unittest, то перейти на PyTest можно буквально в ту же минуту. Для этого в вашем виртуальном окружении должен быть установлен пакет PyTest.
- Подробный отчёт с поддержкой цветовых схем из коробки.
- PyTest не требует написания дополнительных специфических конструкций в тестах, как того требует unittest (no boilerplate).
- Для проверок используется стандартный assert из Python.
- Возможность создания динамических фикстур (специальных функций, которые настраивают тестовые окружения и готовят тестовые данные).
- Дополнительные возможности по настройке фикстур.
- Параметризация тестов — для одного теста можно задать разные параметры (тест запустится несколько раз с разными тестовыми данными).
- Наличие маркировок (marks), которые позволяют маркировать тесты для их выборочного запуска.
- Возможность передавать дополнительные параметры через командную строку для настройки тестовых окружений.
- Большое количество плагинов, которые расширяют возможности PyTest и позволяют решать узкоспециализированные проблемы, что может сэкономить много времени.

## Минусы PyTest:

- PyTest требуется устанавливать дополнительно, так как он не входит в стандартный пакет библиотек Python, в отличие от unittest. Нужно не забывать об этом, когда вы будете настраивать автоматический запуск тестов с помощью CI-сервера.
- Использование PyTest требует более глубокого понимания языка Python, чтобы разобраться, как применять фикстуры, параметризацию и другие возможности PyTest.

## Запуск:
```python
pytest test_abs_project.py
```

Когда мы выполняем команду pytest, тест-раннер собирает все тесты для запуска по определенным правилам:
- если мы не передали никакого аргумента в команду, а написали просто pytest, тест-раннер начнёт поиск в текущей директории
- как аргумент можно передать файл, путь к директории или любую комбинацию директорий и файлов, например: 
```python
pytest scripts/selenium_scripts
# найти все тесты в директории scripts/selenium_scripts

pytest test_user_interface.py
# найти и выполнить все тесты в файле 

pytest scripts/drafts.py::test_register_new_user_parametrized
# найти тест с именем test_register_new_user_parametrized в указанном файле в указанной директории и выполнить
```
- дальше происходит рекурсивный поиск: то есть PyTest обойдет все вложенные директории
- во всех директориях PyTest ищет файлы, которые удовлетворяют правилу  test_*.py или *_test.py (то есть начинаются на test_ или заканчиваются _test и имеют расширение .py)

- внутри всех этих файлов находит тестовые функции по следующему правилу:

    - все тесты, название которых начинается с test, которые находятся вне классов

    - все тесты, название которых начинается с test внутри классов, имя которых начинается с Test (и без метода __init__ внутри класса)

Подробности: Conventions for Python test discovery https://docs.pytest.org/en/stable/goodpractices.html#conventions-for-python-test-discovery